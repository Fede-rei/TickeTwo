Index: Pages/eventPage.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n// Avvia la sessione\r\nsession_start();\r\n\r\n// Imposta il percorso radice del sito\r\n$rootPath = '../';\r\n\r\n// Verifica se l'utente ha effettuato l'accesso e se ha selezionato un evento\r\nif(!isset($_GET['eventId'])) {\r\n    // Se l'utente non ha selezionato un evento, reindirizza alla pagina di login\r\n    if(!isset($_SESSION['user'])) {\r\n        header('Location: login.php');\r\n    } else {\r\n        // Se l'utente ha effettuato l'accesso ma non ha selezionato un evento, reindirizza alla homepage\r\n        header('Location: ..');\r\n    }\r\n}\r\n\r\n// Includi il file di configurazione del database\r\ninclude '../include/db_inc.php';\r\n\r\n// Recupera le informazioni sull'evento selezionato dal database\r\nif (isset($db)) {\r\n    $infoEq = $db->query('select * from Evento e inner join Biglietto b on e.id_evento = b.id_event where id_evento = ' . $_GET['eventId']);\r\n    $infoE = $infoEq->fetch();\r\n}\r\n\r\n// Se l'utente ha effettuato l'accesso ma non ha ancora un'immagine del profilo nella sessione, recupera l'immagine dal database\r\nif(!isset($_SESSION['pic']) && isset($_SESSION['user'])) {\r\n    $pfpq = $db->query('select pfp from utente where id_utente = ' . $_SESSION['user']);\r\n    $_SESSION['pic'] = $pfpq->fetch()['pfp'];\r\n}\r\n?>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <title>TickeTwo - <?= $infoE['nome'] ?></title>\r\n    <!-- Includi i fogli di stile -->\r\n    <link rel=\"stylesheet\" href=\"../Styles/header-footer.css\">\r\n    <link rel=\"stylesheet\" href=\"../Styles/eventPage.css\">\r\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200\" />\r\n    <link href=\"https://fonts.googleapis.com/css?family=Roboto&display=swap\" rel=\"stylesheet\">\r\n    <link href=\"../Images/ticketwoW.png\" rel=\"icon\" type=\"image/png\">\r\n    <!-- Includi lo script per il contatore dei biglietti -->\r\n    <script src=\"../Scripts/counter.js\" defer></script>\r\n    <script src=\"../Scripts/search.js\" defer></script>\r\n</head>\r\n\r\n<body>\r\n<?php include '../include/header.php'; ?>\r\n\r\n<div class=\"imgEvent\" style=\"background-image: url('<?= $infoE['image'] ?>')\">\r\n    <!-- Link per tornare indietro -->\r\n    <a href=\"..\">\r\n        <div class=\"back\">\r\n            <!-- Icona per tornare indietro -->\r\n            <span class=\"material-symbols-outlined\">\r\n                keyboard_backspace\r\n            </span>\r\n        </div>\r\n    </a>\r\n</div>\r\n\r\n<div class=\"deets\">\r\n    <div class=\"desc\">\r\n        <!-- Nome dell'evento -->\r\n        <h1><?= $infoE['nome'] ?></h1>\r\n        <!-- Descrizione, luogo e data dell'evento -->\r\n        <p>\r\n            Descrizione: <?= $infoE['descrizione'] ?>\r\n            <br> Location: <?= $infoE['luogo'] ?>\r\n            <br> Quando: <?= $infoE['data'] ?>\r\n        </p>\r\n    </div>\r\n    <div class=\"payment\">\r\n        <!-- Prezzo del biglietto -->\r\n        <p><?= $infoE['prezzo'] ?> €<br>\r\n            I biglietti verranno inviati all'email verificata</p>\r\n\r\n        <!-- Quantità dei biglietti -->\r\n        <div class=\"quantity\">\r\n            <label for=\"counter\">Qta</label>\r\n            <div id=\"counter\">\r\n                <span class=\"down\" onClick='decreaseCount(event, this)'>-</span>\r\n                <input type=\"text\" min=\"1\" value=\"1\">\r\n                <span class=\"up\" onClick='increaseCount(event, this)'>+</span>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Pulsanti per aggiungere al carrello o acquistare ora -->\r\n        <button>Aggiungi al carrello</button>\r\n        <button>Acquista ora</button>\r\n    </div>\r\n</div>\r\n\r\n<?php include '../include/footer.php'; ?>\r\n</body>\r\n</html>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Pages/eventPage.php b/Pages/eventPage.php
--- a/Pages/eventPage.php	(revision c0384f049cae6111d666f0bf7148ab0cc94291d7)
+++ b/Pages/eventPage.php	(date 1715188627560)
@@ -77,19 +77,21 @@
         <p><?= $infoE['prezzo'] ?> €<br>
             I biglietti verranno inviati all'email verificata</p>
 
-        <!-- Quantità dei biglietti -->
-        <div class="quantity">
-            <label for="counter">Qta</label>
-            <div id="counter">
-                <span class="down" onClick='decreaseCount(event, this)'>-</span>
-                <input type="text" min="1" value="1">
-                <span class="up" onClick='increaseCount(event, this)'>+</span>
-            </div>
-        </div>
+        <form method="post">
+            <!-- Quantità dei biglietti -->
+            <div class="quantity">
+                <label for="counter">Qta</label>
+                <div id="counter">
+                    <span class="down" onClick='decreaseCount(event, this)'>-</span>
+                    <input type="text" min="1" value="1" name="q">
+                    <span class="up" onClick='increaseCount(event, this)'>+</span>
+                </div>
+            </div>
 
-        <!-- Pulsanti per aggiungere al carrello o acquistare ora -->
-        <button>Aggiungi al carrello</button>
-        <button>Acquista ora</button>
+            <!-- Pulsanti per aggiungere al carrello o acquistare ora -->
+            <button type="submit" value="<?= $_GET['eventId'] ?>" name="aggCar">Aggiungi al carrello</button>
+            <button type="submit" name="acquistaOra">Acquista ora</button>
+        </form>
     </div>
 </div>
 
Index: Scripts/counter.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Scripts/counter.js b/Scripts/counter.js
new file mode 100644
--- /dev/null	(date 1715189211428)
+++ b/Scripts/counter.js	(date 1715189211428)
@@ -0,0 +1,18 @@
+function increaseCount(a, b) {
+    var input = b.previousElementSibling;
+    var value = parseInt(input.value, 10);
+    value = isNaN(value) ? 0 : value;
+    value++;
+    input.value = value;
+}
+
+function decreaseCount(a, b) {
+    var input = b.nextElementSibling;
+    var value = parseInt(input.value, 10);
+    if (value > 1) {
+        value = isNaN(value) ? 0 : value;
+        value--;
+        input.value = value;
+    }
+}
+
